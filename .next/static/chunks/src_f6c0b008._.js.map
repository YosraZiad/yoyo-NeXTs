{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/wamp64/www/yoyo-NeXTs/src/components/data-table.tsx"],"sourcesContent":["\"use client\"\r\n\r\n// src/components/data-table.tsx\r\nimport {\r\n  ColumnDef, // This is crucial for defining your columns with a generic type\r\n  flexRender,\r\n  getCoreRowModel,\r\n  useReactTable,\r\n  // ... other necessary imports for your table implementation\r\n} from \"@tanstack/react-table\"; // Adjust this import based on your actual library\r\n\r\n// Define the props interface to be generic over TData and TValue\r\ninterface DataTableProps<TData, TValue> {\r\n  columns: ColumnDef<TData, TValue>[]; // The columns should also be generic\r\n  data: TData[]; // Make data prop generic (TData[])\r\n}\r\n\r\n// Make the functional component itself generic\r\nexport function DataTable<TData, TValue>({\r\n  columns,\r\n  data,\r\n}: DataTableProps<TData, TValue>) {\r\n  const table = useReactTable({\r\n    data,\r\n    columns,\r\n    getCoreRowModel: getCoreRowModel(),\r\n    // Add other necessary table options here (e.g., pagination, sorting)\r\n  });\r\n\r\n  return (\r\n    <div className=\"rounded-md border\">\r\n      <table className=\"min-w-full divide-y divide-gray-200\">\r\n        <thead className=\"bg-gray-50\">\r\n          {table.getHeaderGroups().map((headerGroup) => (\r\n            <tr key={headerGroup.id}>\r\n              {headerGroup.headers.map((header) => {\r\n                return (\r\n                  <th\r\n                    key={header.id}\r\n                    colSpan={header.colSpan}\r\n                    className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\"\r\n                  >\r\n                    {header.isPlaceholder\r\n                      ? null\r\n                      : flexRender(\r\n                          header.column.columnDef.header,\r\n                          header.getContext()\r\n                        )}\r\n                  </th>\r\n                );\r\n              })}\r\n            </tr>\r\n          ))}\r\n        </thead>\r\n        <tbody className=\"bg-white divide-y divide-gray-200\">\r\n          {table.getRowModel().rows.length ? (\r\n            table.getRowModel().rows.map((row) => (\r\n              <tr key={row.id}>\r\n                {row.getVisibleCells().map((cell) => (\r\n                  <td key={cell.id} className=\"px-6 py-4 whitespace-nowrap\">\r\n                    {flexRender(cell.column.columnDef.cell, cell.getContext())}\r\n                  </td>\r\n                ))}\r\n              </tr>\r\n            ))\r\n          ) : (\r\n            <tr>\r\n              <td colSpan={columns.length} className=\"px-6 py-4 text-center text-gray-500\">\r\n                لا يوجد بيانات.\r\n              </td>\r\n            </tr>\r\n          )}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":";;;;AAEA,gCAAgC;AAChC,gUAMgC,kDAAkD;AANlF;;;AAHA;;AAkBO,SAAS,UAAyB,EACvC,OAAO,EACP,IAAI,EAC0B;;IAC9B,MAAM,QAAQ,CAAA,GAAA,yLAAA,CAAA,gBAAa,AAAD,EAAE;QAC1B;QACA;QACA,iBAAiB,CAAA,GAAA,wKAAA,CAAA,kBAAe,AAAD;IAEjC;IAEA,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAM,WAAU;;8BACf,6LAAC;oBAAM,WAAU;8BACd,MAAM,eAAe,GAAG,GAAG,CAAC,CAAC,4BAC5B,6LAAC;sCACE,YAAY,OAAO,CAAC,GAAG,CAAC,CAAC;gCACxB,qBACE,6LAAC;oCAEC,SAAS,OAAO,OAAO;oCACvB,WAAU;8CAET,OAAO,aAAa,GACjB,OACA,CAAA,GAAA,yLAAA,CAAA,aAAU,AAAD,EACP,OAAO,MAAM,CAAC,SAAS,CAAC,MAAM,EAC9B,OAAO,UAAU;mCARlB,OAAO,EAAE;;;;;4BAYpB;2BAhBO,YAAY,EAAE;;;;;;;;;;8BAoB3B,6LAAC;oBAAM,WAAU;8BACd,MAAM,WAAW,GAAG,IAAI,CAAC,MAAM,GAC9B,MAAM,WAAW,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,oBAC5B,6LAAC;sCACE,IAAI,eAAe,GAAG,GAAG,CAAC,CAAC,qBAC1B,6LAAC;oCAAiB,WAAU;8CACzB,CAAA,GAAA,yLAAA,CAAA,aAAU,AAAD,EAAE,KAAK,MAAM,CAAC,SAAS,CAAC,IAAI,EAAE,KAAK,UAAU;mCADhD,KAAK,EAAE;;;;;2BAFX,IAAI,EAAE;;;;kDASjB,6LAAC;kCACC,cAAA,6LAAC;4BAAG,SAAS,QAAQ,MAAM;4BAAE,WAAU;sCAAsC;;;;;;;;;;;;;;;;;;;;;;;;;;;AAS3F;GA1DgB;;QAIA,yLAAA,CAAA,gBAAa;;;KAJb","debugId":null}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":["file:///C:/wamp64/www/yoyo-NeXTs/src/lib/api.ts"],"sourcesContent":["// src/lib/api.ts\r\n// (هذا هو الكود الذي قدمته سابقًا، فقط للتأكيد على السياق)\r\n\r\nimport type { ApiResponse, CustomerListResponse } from \"@/types/customer.d.ts\"; // تأكد من استيراد الواجهة هنا\r\n\r\ninterface RequestConfig extends RequestInit {\r\n  params?: Record<string, string | number>;\r\n}\r\n\r\nclass ApiService {\r\n  private baseUrl: string;\r\n  private apiKey: string;\r\n\r\n  constructor() {\r\n    this.baseUrl = process.env.NEXT_PUBLIC_API_BASE_URL || \"\";\r\n    this.apiKey = process.env.NEXT_PUBLIC_API_KEY || \"\";\r\n  }\r\n\r\n  private buildUrl(\r\n    endpoint: string,\r\n    params?: Record<string, string | number>\r\n  ): string {\r\n    // تأكد من أن baseUrl ينتهي بـ / وأن endpoint لا يبدأ بـ /\r\n    let base = this.baseUrl;\r\n    if (!base.endsWith(\"/\")) {\r\n      base = `${base}/`;\r\n    }\r\n\r\n    let path = endpoint;\r\n    if (path.startsWith(\"/\")) {\r\n      path = path.substring(1);\r\n    }\r\n\r\n    // بناء URL كامل\r\n    const fullUrl = `${base}${path}`;\r\n\r\n    // إضافة معلمات الاستعلام إذا وجدت\r\n    if (!params || Object.keys(params).length === 0) {\r\n      return fullUrl;\r\n    }\r\n\r\n    // بناء سلسلة معلمات الاستعلام\r\n    const queryParams = new URLSearchParams();\r\n    Object.entries(params).forEach(([key, value]) => {\r\n      if (value !== undefined && value !== null) {\r\n        queryParams.append(key, String(value));\r\n      }\r\n    });\r\n\r\n    const queryString = queryParams.toString();\r\n    if (queryString) {\r\n      return `${fullUrl}?${queryString}`;\r\n    }\r\n\r\n    return fullUrl;\r\n  }\r\n\r\n  // استخدام ApiResponse<T> الذي قمت بتعريفه\r\n  private async request<T>(\r\n    endpoint: string,\r\n    config: RequestConfig = {}\r\n  ): Promise<ApiResponse<T>> {\r\n    // تم تحديث نوع الإرجاع هنا\r\n    const { params, ...requestConfig } = config;\r\n\r\n    const url = this.buildUrl(endpoint, params);\r\n\r\n    // طباعة معلومات تشخيصية\r\n    console.log(`🔍 API Request to: ${url}`);\r\n\r\n    // تحسين رؤوس الطلب لتتضمن المزيد من المعلومات للتوثيق\r\n    const defaultConfig: RequestInit = {\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        Accept: \"application/json\",\r\n        Authorization: `Bearer ${this.apiKey}`,\r\n        \"X-Api-Key\": this.apiKey,\r\n        \"X-Requested-With\": \"XMLHttpRequest\",\r\n        ...requestConfig.headers,\r\n      },\r\n      ...requestConfig,\r\n      // تعديل خيارات الطلب\r\n      credentials: \"same-origin\", // تغيير من include إلى same-origin لتجنب مشاكل CORS\r\n      mode: \"cors\", // يسمح بطلبات CORS\r\n      cache: \"no-cache\", // تجنب مشاكل التخزين المؤقت\r\n    };\r\n\r\n    try {\r\n      console.log(`📤 Request Headers:`, defaultConfig.headers);\r\n      console.log(`📤 Request Method:`, defaultConfig.method || \"GET\");\r\n\r\n      const response = await fetch(url, defaultConfig);\r\n      console.log(`📥 Response Status:`, response.status, response.statusText);\r\n\r\n      if (!response.ok) {\r\n        // محاولة تحليل رسالة الخطأ من الاستجابة\r\n        let errorMessage = `HTTP Error ${response.status}: ${response.statusText}`;\r\n        let errorData = {};\r\n\r\n        try {\r\n          // محاولة قراءة بيانات الخطأ كـ JSON\r\n          errorData = await response.json() as Record<string, any>;\r\n          console.error(`❌ API Error Response:`, errorData);\r\n          if (typeof errorData === 'object' && errorData !== null) {\r\n            // استخدام الوصول إلى الكائن بطريقة آمنة من نوع البيانات\r\n            const message = 'message' in errorData ? String(errorData.message) : undefined;\r\n            const error = 'error' in errorData ? String(errorData.error) : undefined;\r\n            errorMessage = message || error || errorMessage;\r\n          }\r\n        } catch (parseError) {\r\n          // إذا لم تكن الاستجابة بتنسيق JSON\r\n          console.error(`❌ Failed to parse error response:`, parseError);\r\n          try {\r\n            // محاولة قراءة الاستجابة كنص\r\n            const textResponse = await response.text();\r\n            console.error(`❌ Error Response Text:`, textResponse);\r\n          } catch (textError) {\r\n            console.error(\r\n              `❌ Failed to read error response as text:`,\r\n              textError\r\n            );\r\n          }\r\n        }\r\n\r\n        return {\r\n          success: false,\r\n          error: errorMessage,\r\n          statusCode: response.status,\r\n        } as ApiResponse<T>;\r\n      }\r\n\r\n      // محاولة تحليل الاستجابة الناجحة\r\n      try {\r\n        const data = await response.json();\r\n        console.log(`✅ API Response Success:`, {\r\n          dataPreview: data ? typeof data : \"null\",\r\n        });\r\n        return { success: true, data };\r\n      } catch (parseError) {\r\n        console.error(`❌ Failed to parse successful response:`, parseError);\r\n        return {\r\n          success: false,\r\n          error: \"Failed to parse API response\",\r\n          statusCode: 200,\r\n        } as ApiResponse<T>;\r\n      }\r\n    } catch (error) {\r\n      console.error(`❌ API Request Failed:`, error);\r\n      return {\r\n        success: false,\r\n        error:\r\n          error instanceof Error ? error.message : \"Network request failed\",\r\n        statusCode: 0, // عدم وجود رمز حالة يشير إلى فشل الشبكة\r\n      } as ApiResponse<T>;\r\n    }\r\n  }\r\n\r\n  // بيانات وهمية للعملاء لاستخدامها في حالة فشل الاتصال بـ API\r\n  private getMockCustomers(): CustomerListResponse {\r\n    return {\r\n      items: [\r\n        {\r\n          id: 1,\r\n          creationTime: new Date().toISOString(),\r\n          creatorId: \"1\",\r\n          lastModificationTime: new Date().toISOString(),\r\n          lastModifierId: \"1\",\r\n          isDeleted: false,\r\n          deleterId: \"\",\r\n          deletionTime: \"\",\r\n          fullName: \"محمد أحمد\",\r\n          companyName: \"شركة الأفق\",\r\n          mobileNumber: \"0501234567\",\r\n          masterMobileNumber: \"0501234567\"\r\n        },\r\n        {\r\n          id: 2,\r\n          creationTime: new Date().toISOString(),\r\n          creatorId: \"1\",\r\n          lastModificationTime: new Date().toISOString(),\r\n          lastModifierId: \"1\",\r\n          isDeleted: false,\r\n          deleterId: \"\",\r\n          deletionTime: \"\",\r\n          fullName: \"سارة محمد\",\r\n          companyName: \"شركة النور\",\r\n          mobileNumber: \"0507654321\",\r\n          masterMobileNumber: \"0507654321\"\r\n        },\r\n        {\r\n          id: 3,\r\n          creationTime: new Date().toISOString(),\r\n          creatorId: \"1\",\r\n          lastModificationTime: new Date().toISOString(),\r\n          lastModifierId: \"1\",\r\n          isDeleted: false,\r\n          deleterId: \"\",\r\n          deletionTime: \"\",\r\n          fullName: \"خالد عبدالله\",\r\n          companyName: \"شركة المستقبل\",\r\n          mobileNumber: \"0509876543\",\r\n          masterMobileNumber: \"0509876543\"\r\n        }\r\n      ],\r\n      totalCount: 3\r\n    };\r\n  }\r\n\r\n  // طرق العملاء\r\n  // هنا نحدد أن getCustomers ستعيد Promise<ApiResponse<CustomerListResponse>>\r\n  async getCustomers(params?: {\r\n    page?: number;\r\n    limit?: number;\r\n  }): Promise<ApiResponse<CustomerListResponse>> {\r\n    try {\r\n      // محاولة الاتصال بـ API الحقيقي\r\n      console.log(\"جاري محاولة الاتصال بـ API الحقيقي...\");\r\n      const response = await this.request(\"/customer\", { params });\r\n      \r\n      // إذا نجح الاتصال، أرجع البيانات الحقيقية\r\n      if (response.success && response.data) {\r\n        const data = response.data as unknown as CustomerListResponse;\r\n        if (data.items && data.items.length > 0) {\r\n          console.log(\"تم الحصول على بيانات العملاء من API\");\r\n          return { success: true, data: data } as ApiResponse<CustomerListResponse>;\r\n        }\r\n      }\r\n      \r\n      // إذا فشل الاتصال أو لم تكن هناك بيانات، استخدم البيانات الوهمية\r\n      console.log(\"استخدام البيانات الوهمية للعملاء\");\r\n      const mockData = this.getMockCustomers();\r\n      return { success: true, data: mockData };\r\n    } catch (error) {\r\n      console.error(\"خطأ في جلب بيانات العملاء:\", error);\r\n      \r\n      // في حالة الخطأ، استخدم البيانات الوهمية\r\n      console.log(\"استخدام البيانات الوهمية للعملاء بسبب خطأ\");\r\n      const mockData = this.getMockCustomers();\r\n      return { success: true, data: mockData };\r\n    }\r\n  }\r\n\r\n  // ... باقي الطرق (مثل getCustomer, createCustomer, إلخ) كما هي\r\n  async getCustomer(id: number) {\r\n    return this.request(`/customers/${id}`);\r\n  }\r\n\r\n  async createCustomer(customerData: any) {\r\n    return this.request(\"/customers\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(customerData),\r\n    });\r\n  }\r\n\r\n  async updateCustomer(id: number, customerData: any) {\r\n    return this.request(`/customer/${id}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(customerData),\r\n    });\r\n  }\r\n\r\n  async getCustomerBalance(customerId: number) {\r\n    return this.request(\"/customer/customer-balance\", {\r\n      params: { customerId },\r\n    });\r\n  }\r\n\r\n  // طرق حسابات الجوال\r\n  async getMobileAccounts(params?: { customerId?: number }) {\r\n    return this.request(\"/mobile-account\", { params });\r\n  }\r\n\r\n  async createMobileAccount(accountData: any) {\r\n    return this.request(\"/mobile-account\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(accountData),\r\n    });\r\n  }\r\n\r\n  async updateMobileAccount(id: number, accountData: any) {\r\n    return this.request(`/mobile-account/${id}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(accountData),\r\n    });\r\n  }\r\n\r\n  async deleteMobileAccount(id: number) {\r\n    return this.request(`/mobile-account/${id}`, {\r\n      method: \"DELETE\",\r\n    });\r\n  }\r\n\r\n  async restartSession(params: { mobileNumber: string; customerId: number }) {\r\n    return this.request(\"/mobile-account/restart-session\", {\r\n      params,\r\n    });\r\n  }\r\n\r\n  async deleteSession(params: { mobileNumber: string; customerId: number }) {\r\n    return this.request(\"/mobile-account/delete-session\", {\r\n      params,\r\n    });\r\n  }\r\n\r\n  // طرق الاشتراكات\r\n  async getSubscriptions(params?: { customerId?: number }) {\r\n    return this.request(\"/customer-subscription\", { params });\r\n  }\r\n\r\n  async createSubscription(subscriptionData: any) {\r\n    return this.request(\"/customer-subscription\", {\r\n      method: \"POST\",\r\n      body: JSON.stringify(subscriptionData),\r\n    });\r\n  }\r\n\r\n  async updateSubscription(id: number, subscriptionData: any) {\r\n    return this.request(`/customer-subscription/${id}`, {\r\n      method: \"PUT\",\r\n      body: JSON.stringify(subscriptionData),\r\n    });\r\n  }\r\n\r\n  async deleteSubscription(id: number) {\r\n    return this.request(`/customer-subscription/${id}`, {\r\n      method: \"DELETE\",\r\n    });\r\n  }\r\n\r\n  async getCurrentPackage(customerId: number) {\r\n    return this.request(\"/customer-subscription/current-package\", {\r\n      params: { customerId },\r\n    });\r\n  }\r\n\r\n  async searchCustomers(query: string) {\r\n    return this.request(\"/customer-subscription/customer-lookup\", {\r\n      params: { query },\r\n    });\r\n  }\r\n\r\n  async searchPackages(query: string) {\r\n    return this.request(\"/customer-subscription/package-lookup\", {\r\n      params: { query },\r\n    });\r\n  }\r\n}\r\n\r\nexport const apiService = new ApiService();\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 445, "column": 0}, "map": {"version":3,"sources":["file:///C:/wamp64/www/yoyo-NeXTs/src/app/%5Blocale%5D/customers/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { DataTable } from \"@/components/data-table\";\r\n// import { SectionCards } from \"@/components/section-cards\";\r\nimport { useCustomers } from \"@/hooks/useApi\";\r\nimport type { Customer, CustomerListResponse } from \"@/types/customer.d.ts\"; // Already correctly using `import type`\r\nimport { apiService } from \"@/lib/api\";\r\nimport { useState, useEffect } from \"react\";\r\n\r\nimport { ColumnDef } from \"@tanstack/react-table\"; // Ensure this import is present\r\n\r\nexport default function Page() {\r\n  // استخدام useState و useEffect بدلاً من hook مخصص للمزيد من التحكم\r\n  const [customers, setCustomers] = useState<Customer[]>([]);\r\n  const [loading, setLoading] = useState<boolean>(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [totalCount, setTotalCount] = useState<number>(0);\r\n\r\n  // استخدام useEffect لجلب البيانات عند تحميل الصفحة\r\n  useEffect(() => {\r\n    const fetchCustomers = async () => {\r\n      try {\r\n        setLoading(true);\r\n        setError(null);\r\n        \r\n        // استدعاء API مباشرة\r\n        const response = await apiService.getCustomers();\r\n        \r\n        if (response.success && response.data) {\r\n          setCustomers(response.data.items || []);\r\n          setTotalCount(response.data.totalCount || 0);\r\n        } else {\r\n          setError(response.message || \"فشل في جلب بيانات العملاء\");\r\n          setCustomers([]);\r\n        }\r\n      } catch (err) {\r\n        console.error(\"خطأ في جلب بيانات العملاء:\", err);\r\n        setError(err instanceof Error ? err.message : \"حدث خطأ غير متوقع\");\r\n        setCustomers([]);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchCustomers();\r\n  }, []);\r\n\r\n  // Define columns using ColumnDef<Customer> for type safety\r\n  const customerColumns: ColumnDef<Customer>[] = [\r\n    {\r\n      accessorKey: \"id\",\r\n      header: \"ID\",\r\n    },\r\n    {\r\n      accessorKey: \"fullName\",\r\n      header: \"الاسم الكامل\",\r\n    },\r\n    {\r\n      accessorKey: \"companyName\",\r\n      header: \"اسم الشركة\",\r\n    },\r\n    {\r\n      accessorKey: \"mobileNumber\",\r\n      header: \"رقم الجوال\",\r\n    },\r\n    {\r\n      accessorKey: \"masterMobileNumber\",\r\n      header: \"رقم الجوال الرئيسي\",\r\n    },\r\n    {\r\n      accessorKey: \"creationTime\",\r\n      header: \"تاريخ الإنشاء\",\r\n      cell: ({ row }) => {\r\n        return new Date(row.original.creationTime).toLocaleDateString();\r\n      },\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <div className=\"flex flex-1 flex-col\">\r\n      <div className=\"@container/main flex flex-1 flex-col gap-2\">\r\n        <div className=\"flex flex-col gap-4 py-4 md:gap-6 md:py-6\">\r\n          {/* <SectionCards /> */}\r\n\r\n          <div className=\"px-4 lg:px-6\">\r\n            <div className=\"mb-4\">\r\n              <h1 className=\"text-2xl font-bold\">قائمة العملاء</h1>\r\n              {totalCount > 0 && <p className=\"text-gray-600\">إجمالي العملاء: {totalCount}</p>}\r\n            </div>\r\n            \r\n            {loading && (\r\n              <div className=\"flex justify-center items-center py-10\">\r\n                <div className=\"animate-spin rounded-full h-10 w-10 border-b-2 border-primary\"></div>\r\n                <span className=\"mr-3 text-gray-600\">جاري تحميل بيانات العملاء...</span>\r\n              </div>\r\n            )}\r\n            \r\n            {error && (\r\n              <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded relative mb-4\">\r\n                <strong className=\"font-bold\">خطأ! </strong>\r\n                <span className=\"block sm:inline\">{error}</span>\r\n                <button \r\n                  className=\"mt-2 bg-red-600 hover:bg-red-700 text-white py-1 px-3 rounded text-sm\"\r\n                  onClick={() => window.location.reload()}\r\n                >\r\n                  إعادة المحاولة\r\n                </button>\r\n              </div>\r\n            )}\r\n\r\n            {!loading && !error && customers.length > 0 && (\r\n              <div className=\"bg-white rounded-lg shadow overflow-hidden\">\r\n                <DataTable columns={customerColumns} data={customers} />\r\n              </div>\r\n            )}\r\n\r\n            {!loading && !error && customers.length === 0 && (\r\n              <div className=\"text-center py-10 bg-gray-50 rounded-lg border border-gray-200\">\r\n                <svg className=\"mx-auto h-12 w-12 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z\" />\r\n                </svg>\r\n                <h3 className=\"mt-2 text-sm font-medium text-gray-900\">لا يوجد عملاء</h3>\r\n                <p className=\"mt-1 text-sm text-gray-500\">لم يتم العثور على أي عملاء في النظام.</p>\r\n              </div>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}